FROM golang:1.14.1
LABEL maintainer="morteza.alizadeh@gmail.com"

ARG VERSION

ADD . /src
WORKDIR /src
RUN make dep
RUN make build

FROM alpine:3.11.5
WORKDIR /
COPY --from=0 /src/bin/api-gateway .
CMD ["/api-gateway", "start"]

